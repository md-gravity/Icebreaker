import {createPassportApi} from '@app/lib/passport-api'
import {ArchivistClientProvider} from '@app/store/archivist-client'
import {PassportClientProvider} from '@app/store/passport-client'
import {UserProvider} from '@app/store/user'

export const metadata = {
  description: 'Generated by create next app',
  title: 'Create Next App',
}

export default async function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  const user = await createPassportApi().currentUser.query()

  return (
    <html lang="en">
      <body>
        <PassportClientProvider>
          <ArchivistClientProvider>
            <UserProvider user={user}>{children}</UserProvider>
          </ArchivistClientProvider>
        </PassportClientProvider>
      </body>
    </html>
  )
}
